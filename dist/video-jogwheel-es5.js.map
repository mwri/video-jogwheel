{"version":3,"sources":["../lib/video-jogwheel.js"],"names":["video_jogwheel","ele","options","undefined","document","getElementById","_ele","_enabled","_sensitivity","sensitivity","enable","wheel_handler","ev","dir","deltaY","now_ts","Date","getTime","last_ts","last_dir","accel","video_adj","currentTime","preventDefault","bind","addEventListener","removeEventListener","level","module","exports","default","window"],"mappings":";;;;;;IAAMA,c;AAEF,4BAAaC,GAAb,EAAkBC,OAAlB,EAA2B;AAAA;;AAEvB,YAAIA,YAAYC,SAAhB,EACID,UAAU,EAAV;;AAEJD,cAAM,OAAOA,GAAP,KAAe,QAAf,GACAG,SAASC,cAAT,CAAwBJ,GAAxB,CADA,GAEAA,GAFN;;AAIA,aAAKK,IAAL,GAAoBL,GAApB;AACA,aAAKM,QAAL,GAAoB,KAApB;AACA,aAAKC,YAAL,GAAoBN,QAAQO,WAAR,IAAuB,CAA3C;;AAEA,aAAKC,MAAL,CAAY,IAAZ;AAEH;;;;+BAEOA,O,EAAQ;;AAEZ,gBAAIC,gBAAiB,UAAUC,EAAV,EAAc;;AAE/B,oBAAIC,MAAWD,GAAGE,MAAH,GAAY,CAAZ,GAAgB,CAAC,CAAjB,GAAqB,CAApC;AACA,oBAAIC,SAAY,IAAIC,IAAJ,EAAD,CAAaC,OAAb,EAAf;AACA,oBAAIC,UAAW,KAAKA,OAApB;AACA,oBAAIC,WAAW,KAAKA,QAApB;;AAEA,oBAAIC,QAAQF,YAAY,IAAZ,IAAoBH,SAASG,OAAT,GAAmB,IAAvC,IAA+CC,aAAaN,GAA5D,GACN,CADM,GACF,QAAQE,SAASG,OAAjB,CADV;AAEA,oBAAIG,YAAY,CAAER,MAAM,EAAP,GAAcO,QAAQ,GAAR,GAAcP,GAA7B,IAAqC,KAAKL,YAA1D;AACA,qBAAKF,IAAL,CAAUgB,WAAV,IAAyBD,SAAzB;;AAEA,qBAAKH,OAAL,GAAgBH,MAAhB;AACA,qBAAKI,QAAL,GAAgBN,GAAhB;;AAEAD,mBAAGW,cAAH;AACA,uBAAO,KAAP;AAEH,aAlBmB,CAkBjBC,IAlBiB,CAkBZ,IAlBY,CAApB;;AAoBA,gBAAId,WAAU,CAAC,KAAKH,QAApB,EAA8B;AAC1B,qBAAKD,IAAL,CAAUmB,gBAAV,CAA2B,OAA3B,EAAoCd,aAApC;AACA,qBAAKJ,QAAL,GAAgB,IAAhB;AACH,aAHD,MAGO,IAAI,CAACG,OAAD,IAAW,KAAKH,QAApB,EAA8B;AACjC,qBAAKD,IAAL,CAAUoB,mBAAV,CAA8B,OAA9B,EAAuCf,aAAvC;AACA,qBAAKJ,QAAL,GAAgB,KAAhB;AACH;AAEJ;;;oCAEYoB,K,EAAO;;AAEhB,gBAAIA,KAAJ,EACI,KAAKnB,YAAL,GAAoBmB,KAApB;;AAEJ,mBAAO,KAAKnB,YAAZ;AAEH;;;;;;AAKL,IAAI,OAAOoB,MAAP,KAAkB,WAAlB,IAAiC,OAAOA,OAAOC,OAAd,KAA0B,WAA/D,EAA4E;AACxED,WAAOC,OAAP,GAAiB,EAAEC,SAAS9B,cAAX,EAAjB;AACH,CAFD,MAEO,IAAI,OAAO+B,MAAP,KAAkB,WAAtB,EAAmC;AACtCA,WAAO/B,cAAP,GAAyBA,cAAzB;AACH","file":"video-jogwheel-es5.js","sourcesContent":["class video_jogwheel {\n\n    constructor (ele, options) {\n\n        if (options === undefined)\n            options = {};\n\n        ele = typeof ele === 'string'\n            ? document.getElementById(ele)\n            : ele;\n\n        this._ele         = ele;\n        this._enabled     = false;\n        this._sensitivity = options.sensitivity || 1;\n\n        this.enable(true);\n\n    }\n\n    enable (enable) {\n\n        let wheel_handler = (function (ev) {\n\n            let dir      = ev.deltaY > 0 ? -1 : 1;\n            let now_ts   = (new Date()).getTime();\n            let last_ts  = this.last_ts;\n            let last_dir = this.last_dir;\n\n            let accel = last_ts === null || now_ts - last_ts > 1000 || last_dir !== dir\n                ? 1 : 1000 / (now_ts - last_ts);\n            let video_adj = ((dir / 50) + (accel / 100 * dir)) * this._sensitivity;\n            this._ele.currentTime += video_adj;\n\n            this.last_ts  = now_ts;\n            this.last_dir = dir;\n\n            ev.preventDefault();\n            return false;\n\n        }).bind(this);\n\n        if (enable && !this._enabled) {\n            this._ele.addEventListener('wheel', wheel_handler);\n            this._enabled = true;\n        } else if (!enable && this._enabled) {\n            this._ele.removeEventListener('wheel', wheel_handler);\n            this._enabled = false;\n        }\n\n    }\n\n    sensitivity (level) {\n\n        if (level)\n            this._sensitivity = level;\n\n        return this._sensitivity;\n\n    }\n\n}\n\n\nif (typeof module !== 'undefined' && typeof module.exports !== 'undefined') {\n    module.exports = { default: video_jogwheel };\n} else if (typeof window !== 'undefined') {\n    window.video_jogwheel  = video_jogwheel;\n}\n"]}